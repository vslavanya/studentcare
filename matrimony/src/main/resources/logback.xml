<?xml version="1.0" encoding="UTF-8" ?>

<configuration>
    <property resource="logback.properties" />
    
	<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
		<layout class="ch.qos.logback.classic.PatternLayout">
			<pattern>
				%d{ISO8601} %t %5p %c{1}:%L - %m%n
			</pattern>
		</layout>
	</appender>
    
    <appender name="LOG_ROOT_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <File>${catalina.home}/logs/matrimony-root.log</File>
        <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
            <fileNamePattern>${catalina.home}/logs/matrimony-root.log.%i.zip</fileNamePattern>
            <minIndex>1</minIndex>
            <maxIndex>${log.count}</maxIndex>
        </rollingPolicy>

        <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
            <maxFileSize>${log.size}</maxFileSize>
        </triggeringPolicy>
    
        <layout class="ch.qos.logback.classic.PatternLayout">
            <Pattern>
                %d{ISO8601} %t %5p %logger{0}:%L - %m%n
            </Pattern>
        </layout>
    </appender>
    
	<appender name="LOG_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<File>${catalina.home}/logs/matrimony.log</File>
		<rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
			<fileNamePattern>${catalina.home}/logs/matrimony.log.%i.zip</fileNamePattern>
            <minIndex>1</minIndex>
            <maxIndex>${log.count}</maxIndex>
		</rollingPolicy>

        <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
            <maxFileSize>${log.size}</maxFileSize>
        </triggeringPolicy>
    
		<layout class="ch.qos.logback.classic.PatternLayout">
			<Pattern>
				%d{ISO8601} %t %5p %logger{0}:%L - %m%n
			</Pattern>
		</layout>
	</appender>

	<appender name="SEND_REPORT_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<File>${catalina.home}/logs/matrimony_send_report.log</File>
		<rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
			<fileNamePattern>${catalina.home}/logs/matrimony_send_report.log.%i.zip</fileNamePattern>
            <minIndex>1</minIndex>
            <maxIndex>${log.count}</maxIndex>
		</rollingPolicy>

        <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
            <maxFileSize>${log.size}</maxFileSize>
        </triggeringPolicy>
    
		<layout class="ch.qos.logback.classic.PatternLayout">
			<Pattern>
				%d{ISO8601} %t %5p %logger{0}:%L - %m%n
			</Pattern>
		</layout>
	</appender>
	
    <root>
        <level value="WARN" />
        <appender-ref ref="LOG_ROOT_FILE" />
    </root>
                
    <logger name="com.rain.urs" additivity="false">
        <level value="${log.level}" />
        <appender-ref ref="LOG_FILE" />
    </logger>
    
    <logger name="sendReport" additivity="false">
        <level value="${log.level}" />
        <appender-ref ref="SEND_REPORT_FILE"/>
    </logger>    
</configuration>

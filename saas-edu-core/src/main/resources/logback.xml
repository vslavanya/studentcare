<?xml version="1.0" encoding="UTF-8" ?>

<configuration>
    <property resource="logback.properties" />
    
	<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
		<layout class="ch.qos.logback.classic.PatternLayout">
			<pattern>
				%d{ISO8601} %t %5p %c{1}:%L - %m%n
			</pattern>
		</layout>
	</appender>
    
    
    
	<appender name="LOG_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<File>/saas/logs/saas-core.log</File>
		<encoder>
		<pattern>%-5level [%d{ISO8601}] Component=SAAS-EDU-CORE Thread="%t" TRAN_ID=%X{TRAN_ID} - %msg%n</pattern>
		</encoder>
		<rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
			<fileNamePattern>/saas/logs/saas.log.%i.zip</fileNamePattern>
            <minIndex>1</minIndex>
            <maxIndex>${log.count}</maxIndex>
		</rollingPolicy>

        <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
            <maxFileSize>${log.size}</maxFileSize>
        </triggeringPolicy>
    
		<!-- <layout class="ch.qos.logback.classic.PatternLayout">
			<Pattern>
				%d{ISO8601} %t %5p %logger{0}:%L - %m%n
			</Pattern>
		</layout> -->
	</appender>

	<appender name="SEND_REPORT_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<File>/saas/logs/saas_core_report.log</File>
		<rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
			<fileNamePattern>/saas/logs/send_report.log.%i.zip</fileNamePattern>
            <minIndex>1</minIndex>
            <maxIndex>${log.count}</maxIndex>
		</rollingPolicy>

        <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
            <maxFileSize>${log.size}</maxFileSize>
        </triggeringPolicy>
    
		<layout class="ch.qos.logback.classic.PatternLayout">
			<Pattern>
				%d{ISO8601} %t %5p %logger{0}:%L - %m%n
			</Pattern>
		</layout>
	</appender>
	
    <root>
        <level value="WARN" />
        <appender-ref ref="LOG_ROOT_FILE" />
    </root>
                
    <logger name="com.saas.edu" additivity="false">
        <level value="${log.level}" />
        <appender-ref ref="LOG_FILE" />
    </logger>
    
    
    <logger name="sendReport" additivity="false">
        <level value="${log.level}" />
        <appender-ref ref="SEND_REPORT_FILE"/>
    </logger>    
</configuration>
